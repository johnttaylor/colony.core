; initialize vars
set a #0
set b #-10
set c #to-be-deleted

;TEST set operations
set
try IF _lastout != #"Active User variables: 3. Max allowed User variables: 4"
      print "Failed. variable count test ($_lastout$)"
      bye app 1
try ENDIF
set d
set
try IF _lastout != #"Active User variables: 3. Max allowed User variables: 4"
      print "Failed. variable delete test#1"
      bye app 1
try ENDIF
set c
set
try IF _lastout != #"Active User variables: 2. Max allowed User variables: 4"
      print "Failed. variable delete test#2"
      bye app 1
try ENDIF
try IF a != #0
      print "Failed. a ($a$) != 0 "
      bye app 1
try ENDIF
      try IF b != #-10
      print "Failed. b ($b$) != -10 "
      bye app 1
try ENDIF

print "PASSED set tests"

;TEST'_lastout' variable
print "Hello World"
try IF _lastout != #"Hello World"
      print "Failed. _lastout test#1"
      bye app 1
try ENDIF

print "PASSED _lastout test#1"

;TEST'inc' command
inc a
try IF a != #1
      print "Failed. a ($a$) != 1 "
      bye app 1
try ENDIF
inc a #2
try IF a != #3
      print "Failed. a ($a$) != 3 "
      bye app 1
try ENDIF
inc a b
try IF a != #-7
      print "Failed. a ($a$) != -7 "
      bye app 1
try ENDIF

print "PASSED inc test"

;TEST'_lastout' variable
try IF _lastout != #"PASSED inc test"
      print "Failed. _lastout != `"PASSED inc test`""
      bye app 1
try ENDIF

print "PASSED _lastout test#2"

;TEST text string
print "`"hello world`""
try IF _errno != #0 
      print "Failed. text-string test#1"
      bye app 1
try ENDIF
try IF _lastout != #"`"hello world`"" 
      print "Failed. text-string test#2"
      bye app 1
try ENDIF
print ""HELLO world"
try IF _errno != #1 
      print "Failed. text-string test#3"
      bye app 1
try ENDIF
print "``HELLO-world"
try IF _errno != #0 
      print "Failed. text-string test#4"
      bye app 1
try ENDIF
try IF _lastout != #`HELLO-world 
      print "Failed. text-string test#5"
      bye app 1
try ENDIF

print "PASSED text-string tests"


;TEST IF/ELSE constructs
set a
set b
set true  #0
set false #0
set elif  #0
set
try IF #2 = #3
      inc true
      print inc-true
try ELSE
      inc false
      print inc-false
try ENDIF
set
try IF true != #0
      print "Failed. IF/ELSE test#1"
      bye app 1
try ENDIF
try IF false != #1
      print "Failed. IF/ELSE test#2"
      bye app 1
try ENDIF
set
try IF false = #0
      print true-clause
      inc true
try ELIF false == #1
      print elif-true-clause
      inc elif
try ELSE
      print else-clause
      inc elif
try ENDIF
try IF true != #0
      print "Fail. IF/ELSE test#3"
      bye app 1
try ENDIF
try IF false != #1
      print "Failed. IF/ELSE test#4"
      bye app 1
try ENDIF
try IF elif != #1
      print "Failed. IF/ELSE test#5"
      bye app 1
try ENDIF

print "PASSED IF/ELSE tests"


;TEST Nested IF/ELSE
print "Starting Nested IF/ELSE tests...."
set a
set b
set true
set false
set elif
set clause #0
print "start test: clause=$clause$"
try IF #2 = #2
      inc clause #1
      print true-clause
try   IF #3 = #3
        print true-true-clause
        inc clause #10
try   ELSE
        print true-false-clause
        inc clause #100
try   ENDIF
try ELIF #3 = #3
      print elif-true-claus
      inc clause #1000
try ENDIF
print "end test: clause=$clause$"
try IF clause != #11
      print "Failed. Nested IF/ELSE test #1"
      bye app 1
try ENDIF

set clause #0
print "start test: clause=$clause$"
try IF #2 = #2
      inc clause #1
      print true-clause
try   IF #3 != #3
        print true-true-clause
        inc clause #10
try   ELSE
        print true-false-clause
        inc clause #100
try   ENDIF
try ELIF #4 = #4
      print elif-true-claus
      inc clause #1000
try ENDIF
print "end test: clause=$clause$"
try IF clause != #101
      print "Failed. Nested IF/ELSE test #2"
      bye app 1
try ENDIF

set clause #0
print "start test: clause=$clause$"
try IF #2 != #2
      inc clause #1
      print true-clause
try   IF #3 != #3
        print true-true-clause
        inc clause #10
try   ELSE
        print true-false-clause
        inc clause #100
try   ENDIF
try ELSE
      print else-true-claus
      inc clause #1000
try ENDIF
print "end test: clause=$clause$"
try IF clause != #1000
      print "Failed. Nested IF/ELSE test #3"
      bye app 1
try ENDIF

set clause #0
print "start test: clause=$clause$"
try IF #2 != #2
      inc clause #1
      print true-clause
try   IF #3 != #3
        print true-true-clause
        inc clause #10
try   ELSE
        print true-false-clause
        inc clause #100
try   ENDIF
try ELIF #4 = #4
      print elif-true-claus
      inc clause #1000
try   IF #5 = #5
        print elif-true-true-clause
        inc clause #10000
try   ELSE
        print elif-true-false-clause
        inc clause #100000
try   ENDIF
try ENDIF
print "end test: clause=$clause$"
try IF clause != #11000
      print "Failed. Nested IF/ELSE test #4"
      bye app 1
try ENDIF

set clause #0
print "start test: clause=$clause$"
try IF #2 != #2
      inc clause #1
      print true-clause
try   IF #3 != #3
        print true-true-clause
        inc clause #10
try   ELSE
        print true-false-clause
        inc clause #100
try   ENDIF
try ELIF #4 = #4
      print elif-true-claus
      inc clause #1000
try   IF #5 != #5
        print elif-true-true-clause
        inc clause #10000
try   ELSE
        print elif-true-false-clause
        inc clause #100000
try   ENDIF
try ENDIF
print "end test: clause=$clause$"
try IF clause != #101000
      print "Failed. Nested IF/ELSE test #5"
      bye app 1
try ENDIF

set clause #0
print "start test: clause=$clause$"
try IF #2 != #2
      inc clause #1
      print true-clause
try   IF #3 != #3
        print true-true-clause
        inc clause #10
try   ELSE
        print true-false-clause
        inc clause #100
try   ENDIF
try ELIF #4 != #4
      print elif-true-claus
      inc clause #1000
try   IF #5 != #5
        print elif-true-true-clause
        inc clause #10000
try   ELSE
        print elif-true-false-clause
        inc clause #100000
try   ENDIF
try ELSE
      print else-clause
      inc clause #1000000
try ENDIF
print "end test: clause=$clause$"
try IF clause != #1000000
      print "Failed. Nested IF/ELSE test #6"
      bye app 1
try ENDIF



; ALL DONE (and ALL passed)
print "ALL TESTS PASSED!"
bye app 0


set a #0
print "Start of loop: a=$a$"
loop BEGIN
       inc a
       print a=$a$
try    IF a >= #5
         print Breaking....
loop     BREAK
try    ENDIF
loop UNTIL
print "End of loop: a=$a$"

set a #0
set c #0
print "Start of OUTER loop: a=$a$, c=$c$"
loop BEGIN
       inc a
       print a=$a$
       set b #0
print  "  Start of INNER loop: b=$b$, c=$c$"
loop   BEGIN
         inc b
         inc c
         print b=$b$
try      IF b >= #3
           print Breaking....
loop       BREAK
try      ENDIF
loop   UNTIL
print  "  End of INNER loop: b=$b$, c=$c$"
try    IF a >= #5
         print Breaking....
loop     BREAK
try    ENDIF
loop UNTIL
print "End of OUTER loop: a=$a$, c=$c$"
